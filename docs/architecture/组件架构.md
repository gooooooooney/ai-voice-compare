# 组件架构

## AudioCaptureManager - 音频捕获管理器

**职责:** 管理浏览器音频捕获、权限请求和音频流处理

**关键接口:**
- `initialize()` - 初始化音频捕获设备
- `startCapture()` - 开始音频录制
- `stopCapture()` - 停止音频录制
- `onAudioData(callback)` - 注册音频数据回调

**技术栈:** 原生Web Audio API, MediaRecorder API，支持WebM/Opus编码

## DeepgramConnector - Deepgram API连接器

**职责:** 管理与Deepgram实时转录服务的连接和通信

**关键接口:**
- `connect(apiKey, options)` - 建立WebSocket连接
- `sendAudio(audioBlob)` - 发送音频数据
- `onTranscript(callback)` - 转录结果回调
- `disconnect()` - 断开连接

**技术栈:** Deepgram JavaScript SDK v5.x，自动WebSocket管理

## AssemblyAIConnector - AssemblyAI API连接器

**职责:** 管理与AssemblyAI实时转录服务的连接，包括令牌管理

**关键接口:**
- `connect(token, options)` - 建立流转录连接
- `sendAudio(audioBuffer)` - 发送音频数据
- `refreshToken()` - 刷新临时令牌
- `disconnect()` - 断开连接

**技术栈:** AssemblyAI Node SDK最新版，StreamingTranscriber类

## PerformanceTracker - 性能追踪器

**职责:** 测量和计算实时转录的性能指标

**关键接口:**
- `startMeasurement(provider, audioId)` - 开始性能测量
- `recordTranscript(audioId, transcript, timestamp)` - 记录转录结果
- `getLatencyStats(provider)` - 获取延迟统计

**技术栈:** Performance API, 高精度时间戳
